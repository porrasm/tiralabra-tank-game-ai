<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>p:\stuff\projects\minigamesproject\minigamesproject\assets\bearded man studios inc\editor\forgeclassfieldvalue.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
//#define FORGE_EDITOR_DEBUGGING

using System;
using System.Reflection;
using UnityEngine;

namespace BeardedManStudios.Forge.Networking.UnityEditor
{
	/// &lt;summary&gt;
	/// This is a class object that contains the field value
	/// &lt;/summary&gt;
	[Serializable]
	public class ForgeClassFieldValue
	{
		public string FieldName;
		public object FieldValue;
		public bool Interpolate;
		public float InterpolateValue;
		public ForgeAcceptableFieldTypes FieldType;
		public bool IsNetworkedObject { get { return FieldName.ToLower() == &quot;networkobject&quot;; } }

		public ForgeClassFieldValue()
		{
			FieldName = string.Empty;
			FieldValue = null;
			Interpolate = false;
			InterpolateValue = 0;
			FieldType = ForgeAcceptableFieldTypes.BYTE;
		}

		public ForgeClassFieldValue(string name, object value, ForgeAcceptableFieldTypes type, bool interpolate, float interpolateValue)
		{
			this.FieldName = name;
			this.FieldValue = value;
			this.FieldType = type;
			this.Interpolate = interpolate;
			this.InterpolateValue = interpolateValue;
		}

		public static ForgeClassFieldValue GetClassField(FieldInfo field, Type t, bool interpolate, float interpolateValue)
		{
			string name = field.Name.Replace(&quot;_&quot;, string.Empty);
			object value = null;
			//if (!t.IsAbstract)
			//    value = field.GetValue(t);

			ForgeAcceptableFieldTypes type = ForgeAcceptableFieldTypes.BYTE;
			Type fieldType = field.FieldType;
			if (fieldType == typeof(int))
				type = ForgeAcceptableFieldTypes.INT;
			else if (fieldType == typeof(uint))
				type = ForgeAcceptableFieldTypes.UINT;
			else if (fieldType == typeof(bool))
				type = ForgeAcceptableFieldTypes.BOOL;
			else if (fieldType == typeof(byte))
				type = ForgeAcceptableFieldTypes.BYTE;
			else if (fieldType == typeof(char))
				type = ForgeAcceptableFieldTypes.CHAR;
			else if (fieldType == typeof(double))
				type = ForgeAcceptableFieldTypes.DOUBLE;
			else if (fieldType == typeof(float))
				type = ForgeAcceptableFieldTypes.FLOAT;
			else if (fieldType == typeof(long))
				type = ForgeAcceptableFieldTypes.LONG;
			else if (fieldType == typeof(ulong))
				type = ForgeAcceptableFieldTypes.ULONG;
			else if (fieldType == typeof(short))
				type = ForgeAcceptableFieldTypes.SHORT;
			else if (fieldType == typeof(ushort))
				type = ForgeAcceptableFieldTypes.USHORT;
			else if (fieldType == typeof(Color))
				type = ForgeAcceptableFieldTypes.COLOR;
			else if (fieldType == typeof(Quaternion))
				type = ForgeAcceptableFieldTypes.QUATERNION;
			else if (fieldType == typeof(Vector2))
				type = ForgeAcceptableFieldTypes.VECTOR2;
			else if (fieldType == typeof(Vector3))
				type = ForgeAcceptableFieldTypes.VECTOR3;
			else if (fieldType == typeof(Vector4))
				type = ForgeAcceptableFieldTypes.VECTOR4;
			//else if (fieldType == typeof(string))
			//	type = ForgeAcceptableFieldTypes.STRING; //Unsupported
			//else if (fieldType == typeof(object[]))
			//	type = ForgeAcceptableFieldTypes.OBJECT_ARRAY; //Unsupported
			//else if (fieldType == typeof(byte[]))
			//	type = ForgeAcceptableFieldTypes.BYTE_ARRAY;
			//else
			//	type = ForgeAcceptableFieldTypes.Unknown; //Unsupported

			return new ForgeClassFieldValue(name, value, type, interpolate, interpolateValue);
		}

		public static Type GetTypeFromAcceptable(ForgeAcceptableFieldTypes type)
		{
			switch (type)
			{
				case ForgeAcceptableFieldTypes.INT:
					return typeof(int);
				case ForgeAcceptableFieldTypes.UINT:
					return typeof(uint);
				case ForgeAcceptableFieldTypes.BOOL:
					return typeof(bool);
				case ForgeAcceptableFieldTypes.BYTE:
					return typeof(byte);
				case ForgeAcceptableFieldTypes.CHAR:
					return typeof(char);
				case ForgeAcceptableFieldTypes.DOUBLE:
					return typeof(double);
				case ForgeAcceptableFieldTypes.FLOAT:
					return typeof(float);
				case ForgeAcceptableFieldTypes.LONG:
					return typeof(long);
				case ForgeAcceptableFieldTypes.ULONG:
					return typeof(ulong);
				case ForgeAcceptableFieldTypes.SHORT:
					return typeof(short);
				case ForgeAcceptableFieldTypes.USHORT:
					return typeof(ushort);
				case ForgeAcceptableFieldTypes.COLOR:
					return typeof(Color);
				case ForgeAcceptableFieldTypes.QUATERNION:
					return typeof(Quaternion);
				case ForgeAcceptableFieldTypes.VECTOR2:
					return typeof(Vector2);
				case ForgeAcceptableFieldTypes.VECTOR3:
					return typeof(Vector3);
				case ForgeAcceptableFieldTypes.VECTOR4:
					return typeof(Vector4);
				//case ForgeAcceptableFieldTypes.STRING: //Unsupported
				//	return typeof(string);
				//case ForgeAcceptableFieldTypes.OBJECT_ARRAY: //Unsupported
				//	return typeof(object[]);
				//case ForgeAcceptableFieldTypes.BYTE_ARRAY:
				//	return typeof(byte[]);
				default:
					return null;
			}
		}

		public static string GetInterpolateFromAcceptable(string baseTypeString, ForgeAcceptableFieldTypes type)
		{
			string returnValue = string.Empty;

			switch (type)
			{
				case ForgeAcceptableFieldTypes.FLOAT:
					returnValue = &quot;InterpolateFloat&quot;;
					break;
				case ForgeAcceptableFieldTypes.VECTOR2:
					returnValue = &quot;InterpolateVector2&quot;;
					break;
				case ForgeAcceptableFieldTypes.VECTOR3:
					returnValue = &quot;InterpolateVector3&quot;;
					break;
				case ForgeAcceptableFieldTypes.VECTOR4:
					returnValue = &quot;InterpolateVector4&quot;;
					break;
				case ForgeAcceptableFieldTypes.QUATERNION:
					returnValue = &quot;InterpolateQuaternion&quot;;
					break;
				default:
					returnValue = &quot;Interpolated&lt;&quot; + baseTypeString + &quot;&gt;&quot;;
					break;
			}

			return !string.IsNullOrEmpty(returnValue) ? returnValue : &quot;Interpolated&lt;object&gt;&quot;;
		}

		public static bool IsInterpolatable(ForgeAcceptableFieldTypes type)
		{
			bool returnValue = false;

			switch (type)
			{
				case ForgeAcceptableFieldTypes.FLOAT:
				case ForgeAcceptableFieldTypes.VECTOR2:
				case ForgeAcceptableFieldTypes.VECTOR3:
				case ForgeAcceptableFieldTypes.VECTOR4:
				case ForgeAcceptableFieldTypes.QUATERNION:
					returnValue = true;
					break;
			}

			return returnValue;
		}

		public static ForgeAcceptableFieldTypes GetTypeFromAcceptable(string val)
		{
			switch (val.Replace(&quot; &quot;, string.Empty).ToLower())
			{
				case &quot;int&quot;:
					return ForgeAcceptableFieldTypes.INT;
				case &quot;uint&quot;:
					return ForgeAcceptableFieldTypes.UINT;
				case &quot;bool&quot;:
					return ForgeAcceptableFieldTypes.BOOL;
				case &quot;byte&quot;:
					return ForgeAcceptableFieldTypes.BYTE;
				case &quot;char&quot;:
					return ForgeAcceptableFieldTypes.CHAR;
				case &quot;double&quot;:
					return ForgeAcceptableFieldTypes.DOUBLE;
				case &quot;float&quot;:
					return ForgeAcceptableFieldTypes.FLOAT;
				case &quot;long&quot;:
					return ForgeAcceptableFieldTypes.LONG;
				case &quot;ulong&quot;:
					return ForgeAcceptableFieldTypes.ULONG;
				case &quot;short&quot;:
					return ForgeAcceptableFieldTypes.SHORT;
				case &quot;ushort&quot;:
					return ForgeAcceptableFieldTypes.USHORT;
				case &quot;color&quot;:
					return ForgeAcceptableFieldTypes.COLOR;
				case &quot;quaternion&quot;:
					return ForgeAcceptableFieldTypes.QUATERNION;
				case &quot;vector2&quot;:
					return ForgeAcceptableFieldTypes.VECTOR2;
				case &quot;vector3&quot;:
					return ForgeAcceptableFieldTypes.VECTOR3;
				case &quot;vector4&quot;:
					return ForgeAcceptableFieldTypes.VECTOR4;
				//case &quot;string&quot;:
				//	return ForgeAcceptableFieldTypes.STRING; //Unsupported
				//case &quot;object[]&quot;:
				//	return ForgeAcceptableFieldTypes.OBJECT_ARRAY; //Unsupported
				//case &quot;byte[]&quot;:
				//	return ForgeAcceptableFieldTypes.BYTE_ARRAY;
				default:
					return ForgeAcceptableFieldTypes.BYTE;
					//return ForgeAcceptableFieldTypes.Unknown; //Unsupported
			}
		}

		public override string ToString()
		{
			return string.Format(&quot;[ Name: {0}, Value: {1}, Type: {2}, IsNetObj: {3}]&quot;, FieldName, FieldValue, FieldType, IsNetworkedObject);
		}
	}
}
    </pre>
    <script type="text/javascript">
      highlightRanges([[20,39,20,40,0],[20,41,20,87,0],[20,88,20,89,0],[22,3,22,32,0],[23,3,23,4,0],[24,4,24,29,0],[25,4,25,22,0],[26,4,26,24,0],[27,4,27,25,0],[28,4,28,47,0],[29,3,29,4,0],[31,3,31,131,0],[32,3,32,4,0],[33,4,33,26,0],[34,4,34,28,0],[35,4,35,26,0],[36,4,36,35,0],[37,4,37,45,0],[38,3,38,4,0],[41,3,41,4,0],[42,4,42,56,0],[43,4,43,24,0],[47,4,47,68,0],[48,4,48,37,0],[49,4,49,33,0],[50,5,50,42,0],[51,9,51,39,0],[52,5,52,43,0],[53,9,53,39,0],[54,5,54,43,0],[55,9,55,39,0],[56,5,56,43,0],[57,9,57,39,0],[58,5,58,43,0],[59,9,59,41,0],[60,5,60,45,0],[61,9,61,40,0],[62,5,62,44,0],[63,9,63,39,0],[64,5,64,43,0],[65,9,65,40,0],[66,5,66,44,0],[67,9,67,40,0],[68,5,68,44,0],[69,9,69,41,0],[70,5,70,45,0],[71,9,71,40,0],[72,5,72,44,0],[73,9,73,45,0],[74,5,74,49,0],[75,9,75,42,0],[76,5,76,46,0],[77,9,77,42,0],[78,5,78,46,0],[79,9,79,42,0],[80,5,80,46,0],[90,4,90,86,0],[91,3,91,4,0],[94,3,94,4,0],[95,4,95,17,0],[98,6,98,25,0],[100,6,100,26,0],[102,6,102,26,0],[104,6,104,26,0],[106,6,106,26,0],[108,6,108,28,0],[110,6,110,27,0],[112,6,112,26,0],[114,6,114,27,0],[116,6,116,27,0],[118,6,118,28,0],[120,6,120,27,0],[122,6,122,32,0],[124,6,124,29,0],[126,6,126,29,0],[128,6,128,29,0],[136,6,136,18,0],[138,3,138,4,0],[141,3,141,4,0],[142,4,142,38,0],[144,4,144,17,0],[147,6,147,39,0],[148,6,148,12,0],[150,6,150,41,0],[151,6,151,12,0],[153,6,153,41,0],[154,6,154,12,0],[156,6,156,41,0],[157,6,157,12,0],[159,6,159,44,0],[160,6,160,12,0],[162,6,162,59,0],[163,6,163,12,0],[166,4,166,85,0],[167,3,167,4,0],[170,3,170,4,0],[171,4,171,29,0],[173,4,173,17,0],[180,6,180,25,0],[181,6,181,12,0],[184,4,184,23,0],[185,3,185,4,0],[188,3,188,4,0],[189,4,189,53,0],[192,6,192,43,0],[194,6,194,44,0],[196,6,196,44,0],[198,6,198,44,0],[200,6,200,44,0],[202,6,202,46,0],[204,6,204,45,0],[206,6,206,44,0],[208,6,208,45,0],[210,6,210,45,0],[212,6,212,46,0],[214,6,214,45,0],[216,6,216,50,0],[218,6,218,47,0],[220,6,220,47,0],[222,6,222,47,0],[230,6,230,44,0],[233,3,233,4,0],[236,3,236,4,0],[237,4,237,132,0],[238,3,238,4,0]]);
    </script>
  </body>
</html>