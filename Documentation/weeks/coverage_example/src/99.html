<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>p:\stuff\projects\minigamesproject\minigamesproject\assets\_assets\scripts\bearded man studios\scripts\networking\forge\networking\lobby\lobbyservice.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using BeardedManStudios.Forge.Networking.Frame;
using System;
using System.Collections;
using System.Collections.Generic;
using System.Linq;

namespace BeardedManStudios.Forge.Networking.Lobby
{
	/// &lt;summary&gt;
	/// The lobby service handles all functionality of handling generic player data
	/// &lt;/summary&gt;
	public class LobbyService : INetworkBehavior
	{
		public const byte RPC_ASSIGN_NAME = 4;
		public const byte RPC_ASSIGN_AVATAR = 5;
		public const byte RPC_ASSIGN_TEAM = 6;
		public const byte RPC_MESSAGE_RECEIVED = 7;
		public const byte RPC_PLAYER_JOINED = 8;
		public const byte RPC_PLAYER_LEFT = 9;
		public const byte RPC_PLAYER_SYNC = 10;

		#region Private Data
		private LobbyServiceNetworkObject networkObject = null;
		private bool _initialized;
		#endregion

		#region Properties
		private static LobbyService _instance;
		/// &lt;summary&gt;
		/// The instance of the Lobby Service
		/// &lt;/summary&gt;
		public static LobbyService Instance
		{
			get
			{
				if (_instance == null)
					_instance = new LobbyService();
				return _instance;
			}
		}

		/// &lt;summary&gt;
		/// This is the dummy service we will default to
		/// &lt;/summary&gt;
		private DummyLobbyMaster _dummyService;

		private ILobbyMaster _masterLobby;
		/// &lt;summary&gt;
		/// The master lobby in which we will be doing callback to
		/// &lt;/summary&gt;
		public ILobbyMaster MasterLobby
		{
			get
			{
				if (_masterLobby == null)
					_masterLobby = _dummyService; //Always default to the dummy service incase we are null

				return _masterLobby;
			}
		}

		/// &lt;summary&gt;
		/// Whether we are the server or not
		/// &lt;/summary&gt;
		public bool IsServer
		{
			get
			{
				if (networkObject != null)
					return networkObject.IsServer;
				return false;
			}
		}

		private IClientMockPlayer _myself;
		/// &lt;summary&gt;
		/// Reference to my networking player
		/// &lt;/summary&gt;
		public IClientMockPlayer MyMockPlayer
		{
			get
			{
				if (_myself == null)
				{
					for (int i = 0; i &lt; MasterLobby.LobbyPlayers.Count; ++i)
					{
						if (MasterLobby.LobbyPlayers[i].NetworkId == networkObject.MyPlayerId)
						{
							_myself = MasterLobby.LobbyPlayers[i];
							break;
						}
					}

					if (_myself == null)
					{
						DummyPlayer dummyPlayer = new DummyPlayer(networkObject.MyPlayerId, string.Format(&quot;Player {0}&quot;, networkObject.MyPlayerId), 0, 0);
						MasterLobby.LobbyPlayers.Add(dummyPlayer);
						_myself = dummyPlayer;
					}
				}

				return _myself;
			}
		}

		/// &lt;summary&gt;
		/// Reference to my networking player
		/// &lt;/summary&gt;
		public NetworkingPlayer MyNetworkingPlayer
		{
			get
			{
				return networkObject.Networker.Me;
			}
		}
		#endregion

		#region Dummy Service
		/// &lt;summary&gt;
		/// A dummy player object
		/// &lt;/summary&gt;
		private class DummyPlayer : IClientMockPlayer
		{
			private uint _networkID;
			public uint NetworkId
			{
				get { return _networkID; }
				set { _networkID = value; }
			}

			private string _name;
			public string Name
			{
				get { return _name; }
				set { _name = value; }
			}

			private int _teamID;
			public int TeamID
			{
				get { return _teamID; }
				set { _teamID = value; }
			}

			private int _avatarID;
			public int AvatarID
			{
				get { return _avatarID; }
				set { _avatarID = value; }
			}

			public DummyPlayer(uint id, string name, int teamID, int avatarID)
			{
				NetworkId = id;
				Name = name;
				TeamID = teamID;
				AvatarID = avatarID;
			}
		}

		/// &lt;summary&gt;
		/// The purpose of this dummy lobby is to handle the player data when
		/// the lobby master doesn&#39;t exist
		/// &lt;/summary&gt;
		private class DummyLobbyMaster : ILobbyMaster
		{
			private List&lt;IClientMockPlayer&gt; _lobbyPlayers = new List&lt;IClientMockPlayer&gt;();
			public List&lt;IClientMockPlayer&gt; LobbyPlayers
			{
				get
				{
					return _lobbyPlayers;
				}
			}

			private Dictionary&lt;uint, IClientMockPlayer&gt; _lobbyPlayersMap = new Dictionary&lt;uint, IClientMockPlayer&gt;();
			public Dictionary&lt;uint, IClientMockPlayer&gt; LobbyPlayersMap
			{
				get
				{
					return _lobbyPlayersMap;
				}
			}

			private Dictionary&lt;int, List&lt;IClientMockPlayer&gt;&gt; _lobbyTeams = new Dictionary&lt;int, List&lt;IClientMockPlayer&gt;&gt;();
			public Dictionary&lt;int, List&lt;IClientMockPlayer&gt;&gt; LobbyTeams
			{
				get
				{
					return _lobbyTeams;
				}
			}

			public DummyLobbyMaster()
			{
				DummyPlayer player = new DummyPlayer(0, &quot;Server&quot;, 0, 0);
				LobbyPlayers.Add(player);
				LobbyPlayersMap.Add(0, player);
				LobbyTeams.Add(0, new List&lt;IClientMockPlayer&gt;() { player });
			}

			public void OnFNPlayerConnected(IClientMockPlayer player)
			{
				if (!LobbyPlayers.Contains(player))
				{
					LobbyPlayers.Add(player);
					LobbyPlayersMap.Add(player.NetworkId, player);
				}
			}

			public void OnFNPlayerDisconnected(IClientMockPlayer player)
			{
				if (LobbyPlayers.Contains(player))
				{
					LobbyPlayers.Remove(player);
					LobbyPlayersMap.Remove(player.NetworkId);
				}
			}

			public void OnFNPlayerNameChanged(IClientMockPlayer player)
			{
				//We don&#39;t care about the name change since we are a dummy class
			}

			public void OnFNTeamChanged(IClientMockPlayer player)
			{
				int newId = player.TeamID;

				if (!LobbyTeams.ContainsKey(newId))
					LobbyTeams.Add(newId, new List&lt;IClientMockPlayer&gt;());

				//We do this to not make Foreach loops
				IEnumerator iter = LobbyTeams.GetEnumerator();
				iter.Reset();
				while (iter.MoveNext())
				{
					if (iter.Current != null)
					{
						KeyValuePair&lt;int, List&lt;IClientMockPlayer&gt;&gt; kv = (KeyValuePair&lt;int, List&lt;IClientMockPlayer&gt;&gt;)iter.Current;
						if (kv.Value.Contains(player))
						{
							kv.Value.Remove(player);
							break;
						}
					}
					else
						break;
				}

				//We prevent the player being added twice to the same team
				if (!LobbyTeams[newId].Contains(player))
					LobbyTeams[newId].Add(player);
			}

			public void OnFNAvatarIDChanged(IClientMockPlayer player)
			{
				//We don&#39;t care about the avatar id change because we are a dummy class
			}

			public void OnFNPlayerSync(IClientMockPlayer player)
			{
				//We dont care about this because we are a dummy class
			}

			public void OnFNLobbyMasterKnowledgeTransfer(ILobbyMaster previousLobbyMaster)
			{
				LobbyPlayers.Clear();
				LobbyPlayersMap.Clear();
				LobbyTeams.Clear();
				for (int i = 0; i &lt; previousLobbyMaster.LobbyPlayers.Count; ++i)
				{
					IClientMockPlayer player = previousLobbyMaster.LobbyPlayers[i];
					LobbyPlayers.Add(player);
					LobbyPlayersMap.Add(player.NetworkId, player);
				}

				IEnumerator iter = previousLobbyMaster.LobbyTeams.GetEnumerator();
				iter.Reset();
				while (iter.MoveNext())
				{
					if (iter.Current != null)
					{
						KeyValuePair&lt;int, List&lt;IClientMockPlayer&gt;&gt; kv = (KeyValuePair&lt;int, List&lt;IClientMockPlayer&gt;&gt;)iter.Current;
						LobbyTeams.Add(kv.Key, kv.Value);
					}
					else
						break;
				}
				foreach (KeyValuePair&lt;int, List&lt;IClientMockPlayer&gt;&gt; kv in previousLobbyMaster.LobbyTeams)
				{
					LobbyTeams.Add(kv.Key, kv.Value);
				}
			}

			public void OnFNLobbyPlayerMessageReceived(IClientMockPlayer player, string message)
			{
				//We ignore all messages we have received from other players because we are a dummy class
			}
		}
		#endregion

		#region Constructor
		/// &lt;summary&gt;
		/// We are a private constructor because we don&#39;t want
		/// to be created outside of the library
		/// &lt;/summary&gt;
		private LobbyService()
		{
			_dummyService = new DummyLobbyMaster();
			SetLobbyMaster(_dummyService); //We set the dummy service by default
		}
		#endregion

		#region Nested Clases
		public class LobbyServiceNetworkObject : NetworkObject
		{
			public const int IDENTITY = -50;
			private byte[] _dirtyFields = new byte[0];

			public override int UniqueIdentity
			{
				get { return IDENTITY; }
			}

			protected override BMSByte WritePayload(BMSByte data)
			{
				return data;
			}

			protected override void ReadPayload(BMSByte payload, ulong timestep)
			{
			}

			protected override BMSByte SerializeDirtyFields()
			{
				dirtyFieldsData.Clear();
				dirtyFieldsData.Append(_dirtyFields);

				return dirtyFieldsData;
			}

			protected override void ReadDirtyFields(BMSByte data, ulong timestep)
			{
				Buffer.BlockCopy(data.byteArr, data.StartIndex(), readDirtyFlags, 0, readDirtyFlags.Length);
				data.MoveStartIndex(readDirtyFlags.Length);
			}

			public override void InterpolateUpdate()
			{
				if (IsOwner)
					return;

			}

			private void Initialize()
			{
				readDirtyFlags = new byte[0];

			}

			public LobbyServiceNetworkObject() : base() { Initialize(); }
			public LobbyServiceNetworkObject(NetWorker networker, INetworkBehavior networkBehavior = null, int createCode = 0, byte[] metadata = null) : base(networker, networkBehavior, createCode, metadata) { Initialize(); }
			public LobbyServiceNetworkObject(NetWorker networker, uint serverId, FrameStream frame) : base(networker, serverId, frame) { Initialize(); }
		}
		#endregion

		#region Public API
		/// &lt;summary&gt;
		/// Set the lobby master
		/// &lt;/summary&gt;
		/// &lt;param name=&quot;lobbyMaster&quot;&gt;The next lobby master&lt;/param&gt;
		public void SetLobbyMaster(ILobbyMaster lobbyMaster)
		{
			//Ignore setting the same lobby twice
			if (lobbyMaster == _masterLobby)
				return;

			if (lobbyMaster != null)
			{
				if (_masterLobby != null)
				{
					//We update the lobby with the previous one&#39;s information because it may be more up to date
					lobbyMaster.OnFNLobbyMasterKnowledgeTransfer(_masterLobby);
					_masterLobby = lobbyMaster;
				}
				else
					_masterLobby = lobbyMaster;
			}
		}

		/// &lt;summary&gt;
		/// Assigns a new name for yourself
		/// &lt;/summary&gt;
		/// &lt;param name=&quot;newName&quot;&gt;The next name you will be referred as&lt;/param&gt;
		public void SetName(string newName)
		{
			IClientMockPlayer player = GetClientMockPlayer(networkObject.MyPlayerId);
			player.Name = newName;
			networkObject.SendRpc(RPC_ASSIGN_NAME,
				true,
				Receivers.All,
				newName,
				networkObject.MyPlayerId);
		}

		/// &lt;summary&gt;
		/// Set your avatar to a new id
		/// &lt;/summary&gt;
		/// &lt;param name=&quot;avatarID&quot;&gt;Next avatar id&lt;/param&gt;
		public void SetAvatar(int avatarID)
		{
			IClientMockPlayer player = GetClientMockPlayer(networkObject.MyPlayerId);
			player.AvatarID = avatarID;
			networkObject.SendRpc(RPC_ASSIGN_AVATAR, Receivers.All, networkObject.MyPlayerId, avatarID);
		}

		/// &lt;summary&gt;
		/// Sets your team id
		/// &lt;/summary&gt;
		/// &lt;param name=&quot;teamId&quot;&gt;The new team id&lt;/param&gt;
		public void SetTeamId(int teamId)
		{
			IClientMockPlayer player = GetClientMockPlayer(networkObject.MyPlayerId);
			player.TeamID = teamId;
			// TODO:  When someone joins they need to get the current players selections
			networkObject.SendRpc(RPC_ASSIGN_TEAM, Receivers.All, networkObject.MyPlayerId, teamId);
		}

		/// &lt;summary&gt;
		/// Send a message to everyone connected
		/// &lt;/summary&gt;
		/// &lt;param name=&quot;message&quot;&gt;The message you want to send&lt;/param&gt;
		public void SendPlayerMessage(string message)
		{
			// TODO:  When someone joins they need to get the current players selections
			networkObject.SendRpc(RPC_MESSAGE_RECEIVED, Receivers.All, networkObject.MyPlayerId, message);
		}

		public void KickPlayer(uint id)
		{
			if (networkObject.Networker.IsServer)
			{
				//TODO: I am the server, so disconnect the id passed in here!
				NetworkingPlayer player = networkObject.Networker.FindPlayer(p =&gt; p.NetworkId == id);
				if (player != null)
				{
					IServer serverSocket = (IServer)networkObject.Networker;
					serverSocket.Disconnect(player, true);
					serverSocket.CommitDisconnects();
				}
			}
		}

		/// &lt;summary&gt;
		/// Whether the id matches my player id
		/// &lt;/summary&gt;
		/// &lt;param name=&quot;id&quot;&gt;Player id&lt;/param&gt;
		/// &lt;returns&gt;True/False depending on the id passed in&lt;/returns&gt;
		public bool MatchesMe(uint id)
		{
			return networkObject.MyPlayerId == id;
		}
		#endregion

		#region Network Behavior
		public void Initialize(NetworkObject obj)
		{
			// We have already initialized this object
			if (_initialized)
				return;

			networkObject = (LobbyServiceNetworkObject)obj;
			networkObject.AttachedBehavior = this;

			networkObject.RegisterRpc(&quot;AssignName&quot;, AssignName, typeof(string), typeof(uint));
			networkObject.RegisterRpc(&quot;AssignAvatar&quot;, AssignAvatar, typeof(uint), typeof(int));
			networkObject.RegisterRpc(&quot;AssignTeam&quot;, AssignTeam, typeof(uint), typeof(int));
			networkObject.RegisterRpc(&quot;MessageReceived&quot;, MessageReceived, typeof(uint), typeof(string));
			networkObject.RegisterRpc(&quot;PlayerJoined&quot;, PlayerJoined, typeof(uint));
			networkObject.RegisterRpc(&quot;PlayerLeft&quot;, PlayerLeft, typeof(uint));
			networkObject.RegisterRpc(&quot;SyncPlayer&quot;, SyncPlayer, typeof(uint), typeof(string), typeof(int), typeof(int));
			networkObject.RegistrationComplete();
			_initialized = true;

			//Logging.BMSLog.Log(&quot;SERVICE ID: &quot; + networkObject.NetworkId);

			NetworkStart();
		}

		public void Initialize(NetWorker networker, byte[] metadata = null)
		{
			Initialize(new LobbyServiceNetworkObject(networker));
		}

		private void NetworkStart()
		{
			if (!networkObject.IsServer)
				return;

			networkObject.Networker.playerAccepted += PlayerConnected;
			networkObject.Networker.playerDisconnected += PlayerDisconnected;
		}

		/// &lt;summary&gt;
		/// Arguments:
		/// string playername
		/// uint playerid
		/// &lt;/summary&gt;
		private void AssignName(RpcArgs args)
		{
			string playerName = args.GetNext&lt;string&gt;();
			uint playerId = args.GetNext&lt;uint&gt;();
			var player = GetClientMockPlayer(playerId);

			if (player == null)
				return;

			player.Name = playerName;

			if (networkObject.IsServer)
				args.Info.SendingPlayer.Name = playerName;

			MasterLobby.OnFNPlayerNameChanged(player);
		}

		//public void PlayerConnected(IClientMockPlayer player)
		//{
		//	//Logging.BMSLog.Log(&quot;SEVERRRR: &quot; + player.NetworkId);
		//	player.Name = &quot;Player &quot; + player.NetworkId;
		//	networkObject.SendRpc(RPC_PLAYER_JOINED, Receivers.AllBuffered, player.NetworkId);
		//}

		/// &lt;summary&gt;
		/// Arguments:
		/// uint playerid
		/// &lt;/summary&gt;
		private void PlayerJoined(RpcArgs args)
		{
			uint playerId = args.GetNext&lt;uint&gt;();
			var player = CreateClientMockPlayer(playerId, &quot;Player &quot; + playerId);

			MasterLobby.OnFNPlayerConnected(player);
		}
		/// &lt;summary&gt;
		/// Arguments:
		/// uint playerid
		/// &lt;/summary&gt;
		private void PlayerLeft(RpcArgs args)
		{
			uint playerId = args.GetNext&lt;uint&gt;();
			var player = GetClientMockPlayer(playerId);

			if (player == null)
				return;

			MasterLobby.OnFNPlayerDisconnected(player);
		}
		/// &lt;summary&gt;
		/// Arguments:
		/// uint playerid
		/// int avatarid
		/// &lt;/summary&gt;
		private void AssignAvatar(RpcArgs args)
		{
			uint playerId = args.GetNext&lt;uint&gt;();
			int avatarId = args.GetNext&lt;int&gt;();
			var player = GetClientMockPlayer(playerId);

			if (player == null)
				return;

			player.AvatarID = avatarId;
			MasterLobby.OnFNAvatarIDChanged(player);
		}
		/// &lt;summary&gt;
		/// Arguments:
		/// uint playerid
		/// int teamid
		/// &lt;/summary&gt;
		private void AssignTeam(RpcArgs args)
		{
			uint playerId = args.GetNext&lt;uint&gt;();
			int teamId = args.GetNext&lt;int&gt;();
			var player = GetClientMockPlayer(playerId);

			if (player == null)
				return;

			player.TeamID = teamId;
			MasterLobby.OnFNTeamChanged(player);
		}
		/// &lt;summary&gt;
		/// Arguments:
		/// uint playerid
		/// string message
		/// &lt;/summary&gt;
		private void MessageReceived(RpcArgs args)
		{
			uint playerId = args.GetNext&lt;uint&gt;();
			string message = args.GetNext&lt;string&gt;();
			var player = GetClientMockPlayer(playerId);

			if (player == null)
				return;

			MasterLobby.OnFNLobbyPlayerMessageReceived(player, message);
		}
		/// &lt;summary&gt;
		/// Arguments:
		/// uint playerid
		/// strng playername
		/// int teamid
		/// int avatarid
		/// &lt;/summary&gt;
		private void SyncPlayer(RpcArgs args)
		{
			uint playerId = args.GetNext&lt;uint&gt;();
			string playerName = args.GetNext&lt;string&gt;();
			int teamID = args.GetNext&lt;int&gt;();
			int avatarID = args.GetNext&lt;int&gt;();
			var player = GetClientMockPlayer(playerId);

			if (player == null)
			{
				player = CreateClientMockPlayer(playerId, &quot;Player &quot; + playerId);
				MasterLobby.OnFNPlayerConnected(player);
			}

			player.Name = playerName;
			player.TeamID = teamID;
			player.AvatarID = avatarID;
			MasterLobby.OnFNPlayerSync(player);
		}

		private IClientMockPlayer CreateClientMockPlayer(uint playerId, string playerName)
		{
			var player = new DummyPlayer(playerId, playerName, 0, 0);
			return player;
		}

		private IClientMockPlayer GetClientMockPlayer(uint playerId)
		{
			IClientMockPlayer targetPlayer = null;
			if (MasterLobby != null)
			{
				for (int i = 0; i &lt; MasterLobby.LobbyPlayers.Count; ++i)
				{
					if (MasterLobby.LobbyPlayers[i].NetworkId == playerId)
					{
						targetPlayer = MasterLobby.LobbyPlayers[i];
						break;
					}
				}
			}
			return targetPlayer;
		}

		private void PlayerConnected(NetworkingPlayer player, NetWorker sender)
		{
			//Logging.BMSLog.Log(&quot;GG: &quot; + player.Ip);
			player.Name = &quot;Player &quot; + player.NetworkId;
			networkObject.SendRpc(RPC_PLAYER_JOINED, Receivers.All, player.NetworkId);

			sender.IteratePlayers((p) =&gt;
			{
				if (p == player)
					return;

				networkObject.SendRpc(player, RPC_PLAYER_JOINED, p.NetworkId);
				IClientMockPlayer cPlayer = MasterLobby.LobbyPlayers.First(l =&gt; l.NetworkId == p.NetworkId);
				networkObject.SendRpc(player, RPC_PLAYER_SYNC, p.NetworkId, cPlayer.Name, cPlayer.TeamID, cPlayer.AvatarID);
			});
		}

		private void PlayerDisconnected(NetworkingPlayer player, NetWorker sender)
		{
			// TODO:  This should be called
			//Logging.BMSLog.Log(&quot;OH NO: &quot; + player.Ip);
			//BeardedManStudios.Forge.Logging.BMSLog.Log(&quot;Player disconnected&quot;);
			networkObject.SendRpc(RPC_PLAYER_LEFT, Receivers.All, player.NetworkId);
		}
		#endregion
	}
}

    </pre>
    <script type="text/javascript">
      highlightRanges([[23,3,23,58,0],[35,4,35,5,0],[36,5,36,27,0],[37,6,37,37,0],[38,5,38,22,0],[39,4,39,5,0],[54,4,54,5,0],[55,5,55,30,0],[56,6,56,35,0],[58,5,58,25,0],[59,4,59,5,0],[68,4,68,5,0],[69,5,69,31,0],[70,6,70,36,0],[71,5,71,18,0],[72,4,72,5,0],[82,4,82,5,0],[83,5,83,25,0],[84,5,84,6,0],[85,11,85,20,0],[85,22,85,56,0],[85,58,85,61,0],[86,6,86,7,0],[87,7,87,77,0],[88,7,88,8,0],[89,8,89,46,0],[90,8,90,14,0],[92,6,92,7,0],[94,6,94,26,0],[95,6,95,7,0],[96,7,96,136,0],[97,7,97,49,0],[98,7,98,29,0],[99,6,99,7,0],[100,5,100,6,0],[102,5,102,20,0],[103,4,103,5,0],[112,4,112,5,0],[113,5,113,39,0],[114,4,114,5,0],[127,9,127,10,0],[127,11,127,29,0],[127,30,127,31,0],[128,9,128,10,0],[128,11,128,30,0],[128,31,128,32,0],[134,9,134,10,0],[134,11,134,24,0],[134,25,134,26,0],[135,9,135,10,0],[135,11,135,25,0],[135,26,135,27,0],[141,9,141,10,0],[141,11,141,26,0],[141,27,141,28,0],[142,9,142,10,0],[142,11,142,27,0],[142,28,142,29,0],[148,9,148,10,0],[148,11,148,28,0],[148,29,148,30,0],[149,9,149,10,0],[149,11,149,29,0],[149,30,149,31,0],[152,4,152,70,0],[153,4,153,5,0],[154,5,154,20,0],[155,5,155,17,0],[156,5,156,21,0],[157,5,157,25,0],[158,4,158,5,0],[167,4,167,82,0],[171,5,171,6,0],[172,6,172,27,0],[173,5,173,6,0],[176,4,176,109,0],[180,5,180,6,0],[181,6,181,30,0],[182,5,182,6,0],[185,4,185,114,0],[189,5,189,6,0],[190,6,190,25,0],[191,5,191,6,0],[194,4,194,29,0],[195,4,195,5,0],[196,5,196,61,0],[197,5,197,30,0],[198,5,198,36,0],[199,5,199,65,0],[200,4,200,5,0],[203,4,203,5,0],[204,5,204,40,0],[205,5,205,6,0],[206,6,206,31,0],[207,6,207,52,0],[208,5,208,6,0],[209,4,209,5,0],[212,4,212,5,0],[213,5,213,39,0],[214,5,214,6,0],[215,6,215,34,0],[216,6,216,47,0],[217,5,217,6,0],[218,4,218,5,0],[221,4,221,5,0],[223,4,223,5,0],[226,4,226,5,0],[227,5,227,31,0],[229,5,229,40,0],[230,6,230,59,0],[233,5,233,51,0],[234,5,234,18,0],[235,5,235,28,0],[236,5,236,6,0],[237,6,237,31,0],[238,6,238,7,0],[239,7,239,112,0],[240,7,240,37,0],[241,7,241,8,0],[242,8,242,32,0],[243,8,243,14,0],[245,6,245,7,0],[247,7,247,13,0],[248,5,248,6,0],[251,5,251,45,0],[252,6,252,36,0],[253,4,253,5,0],[256,4,256,5,0],[258,4,258,5,0],[261,4,261,5,0],[263,4,263,5,0],[266,4,266,5,0],[267,5,267,26,0],[268,5,268,29,0],[269,5,269,24,0],[270,10,270,19,0],[270,21,270,63,0],[270,65,270,68,0],[271,5,271,6,0],[272,6,272,69,0],[273,6,273,31,0],[274,6,274,52,0],[275,5,275,6,0],[277,5,277,71,0],[278,5,278,18,0],[279,5,279,28,0],[280,5,280,6,0],[281,6,281,31,0],[282,6,282,7,0],[283,7,283,112,0],[284,7,284,40,0],[285,6,285,7,0],[287,7,287,13,0],[288,5,288,6,0],[289,5,289,12,0],[289,14,289,59,0],[289,60,289,62,0],[289,63,289,93,0],[290,5,290,6,0],[291,6,291,39,0],[292,5,292,6,0],[293,4,293,5,0],[296,4,296,5,0],[298,4,298,5,0],[307,3,307,25,0],[308,3,308,4,0],[309,4,309,43,0],[310,4,310,34,0],[311,3,311,4,0],[318,4,318,46,0],[318,4,318,46,0],[318,4,318,46,0],[322,9,322,10,0],[322,11,322,27,0],[322,28,322,29,0],[326,4,326,5,0],[327,5,327,17,0],[328,4,328,5,0],[331,4,331,5,0],[332,4,332,5,0],[335,4,335,5,0],[336,5,336,29,0],[337,5,337,42,0],[339,5,339,28,0],[340,4,340,5,0],[343,4,343,5,0],[344,5,344,97,0],[345,5,345,48,0],[346,4,346,5,0],[349,4,349,5,0],[350,5,350,17,0],[351,6,351,13,0],[353,4,353,5,0],[356,4,356,5,0],[357,5,357,34,0],[359,4,359,5,0],[361,41,361,47,0],[361,48,361,49,0],[361,50,361,63,0],[361,64,361,65,0],[362,145,362,199,0],[362,200,362,201,0],[362,202,362,215,0],[362,216,362,217,0],[363,94,363,126,0],[363,127,363,128,0],[363,129,363,142,0],[363,143,363,144,0],[373,3,373,4,0],[375,4,375,36,0],[376,5,376,12,0],[378,4,378,28,0],[379,4,379,5,0],[380,5,380,30,0],[381,5,381,6,0],[383,6,383,65,0],[384,6,384,33,0],[385,5,385,6,0],[387,6,387,33,0],[388,4,388,5,0],[389,3,389,4,0],[396,3,396,4,0],[397,4,397,77,0],[398,4,398,26,0],[399,4,403,31,0],[404,3,404,4,0],[411,3,411,4,0],[412,4,412,77,0],[413,4,413,31,0],[414,4,414,96,0],[415,3,415,4,0],[422,3,422,4,0],[423,4,423,77,0],[424,4,424,27,0],[426,4,426,92,0],[427,3,427,4,0],[434,3,434,4,0],[436,4,436,98,0],[437,3,437,4,0],[440,3,440,4,0],[441,4,441,41,0],[442,4,442,5,0],[444,5,444,71,0],[444,71,444,88,0],[444,88,444,90,0],[444,5,444,90,0],[445,5,445,24,0],[446,5,446,6,0],[447,6,447,62,0],[448,6,448,44,0],[449,6,449,39,0],[450,5,450,6,0],[451,4,451,5,0],[452,3,452,4,0],[460,3,460,4,0],[461,4,461,42,0],[462,3,462,4,0],[467,3,467,4,0],[469,4,469,21,0],[470,5,470,12,0],[472,4,472,51,0],[473,4,473,42,0],[475,4,475,86,0],[476,4,476,87,0],[477,4,477,83,0],[478,4,478,96,0],[479,4,479,74,0],[480,4,480,70,0],[481,4,481,112,0],[482,4,482,41,0],[483,4,483,24,0],[487,4,487,19,0],[488,3,488,4,0],[491,3,491,4,0],[492,4,492,57,0],[493,3,493,4,0],[496,3,496,4,0],[497,4,497,32,0],[498,5,498,12,0],[500,4,500,62,0],[501,4,501,69,0],[502,3,502,4,0],[510,3,510,4,0],[511,4,511,47,0],[512,4,512,41,0],[513,4,513,47,0],[515,4,515,23,0],[516,5,516,12,0],[518,4,518,29,0],[520,4,520,31,0],[521,5,521,47,0],[523,4,523,46,0],[524,3,524,4,0],[538,3,538,4,0],[539,4,539,41,0],[540,4,540,72,0],[542,4,542,44,0],[543,3,543,4,0],[549,3,549,4,0],[550,4,550,41,0],[551,4,551,47,0],[553,4,553,23,0],[554,5,554,12,0],[556,4,556,47,0],[557,3,557,4,0],[564,3,564,4,0],[565,4,565,41,0],[566,4,566,39,0],[567,4,567,47,0],[569,4,569,23,0],[570,5,570,12,0],[572,4,572,31,0],[573,4,573,44,0],[574,3,574,4,0],[581,3,581,4,0],[582,4,582,41,0],[583,4,583,37,0],[584,4,584,47,0],[586,4,586,23,0],[587,5,587,12,0],[589,4,589,27,0],[590,4,590,40,0],[591,3,591,4,0],[598,3,598,4,0],[599,4,599,41,0],[600,4,600,44,0],[601,4,601,47,0],[603,4,603,23,0],[604,5,604,12,0],[606,4,606,64,0],[607,3,607,4,0],[616,3,616,4,0],[617,4,617,41,0],[618,4,618,47,0],[619,4,619,37,0],[620,4,620,39,0],[621,4,621,47,0],[623,4,623,23,0],[624,4,624,5,0],[625,5,625,69,0],[626,5,626,45,0],[627,4,627,5,0],[629,4,629,29,0],[630,4,630,27,0],[631,4,631,31,0],[632,4,632,39,0],[633,3,633,4,0],[636,3,636,4,0],[637,4,637,61,0],[638,4,638,18,0],[639,3,639,4,0],[642,3,642,4,0],[643,4,643,42,0],[644,4,644,28,0],[645,4,645,5,0],[646,10,646,19,0],[646,21,646,55,0],[646,57,646,60,0],[647,5,647,6,0],[648,6,648,60,0],[649,6,649,7,0],[650,7,650,50,0],[651,7,651,13,0],[653,5,653,6,0],[654,4,654,5,0],[655,4,655,24,0],[656,3,656,4,0],[659,3,659,4,0],[661,4,661,47,0],[662,4,662,78,0],[664,4,665,4,0],[665,4,665,5,0],[665,5,666,5,0],[666,5,666,21,0],[666,21,667,6,0],[667,6,667,13,0],[667,13,669,5,0],[669,5,669,67,0],[669,67,670,5,0],[670,5,670,69,0],[670,69,670,95,0],[670,95,670,97,0],[670,5,670,97,0],[670,97,671,5,0],[671,5,671,113,0],[671,113,672,4,0],[672,4,672,5,0],[672,5,672,7,0],[664,4,672,7,0],[673,3,673,4,0],[676,3,676,4,0],[680,4,680,76,0],[681,3,681,4,0]]);
    </script>
  </body>
</html>