<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>p:\stuff\projects\minigamesproject\minigamesproject\assets\_assets\scripts\games\tankgame\tankai\datastructures\vector.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using UnityEngine;

/// &lt;summary&gt;
/// Vector struct containing multiple vector related mathematical functions.
/// &lt;/summary&gt;
public struct Vector {

    public float x, y, z;

    public Vector(Vector3 vector3) {
        x = vector3.x;
        y = vector3.y;
        z = vector3.z;
    }
    public Vector(float x, float y, float z) {
        this.x = x;
        this.y = y;
        this.z = z;
    }
    public Vector(double x, double y, double z) {
        this.x = (float)x;
        this.y = (float)y;
        this.z = (float)z;
    }

    /// &lt;summary&gt;
    /// Returns the length of the vector
    /// &lt;/summary&gt;
    /// &lt;returns&gt;&lt;/returns&gt;
    public float Magnitude() {
        float value = Maths.Power(x, 2) + Maths.Power(y, 2) + Maths.Power(z, 2);
        return Maths.Sqrt(value);
    }

    /// &lt;summary&gt;
    /// Returns a vector with the same direction with magnitude 1
    /// &lt;/summary&gt;
    public Vector Normalized {
        get {
            double magnitude = Magnitude();
            if (magnitude == 0) {
                return this;
            }
            return this / magnitude;
        }
    }

    /// &lt;summary&gt;
    /// Transform the vector into a Unity Vector3
    /// &lt;/summary&gt;
    public Vector3 Vector3 {
        get {
            return new Vector3(x, y, z);
        }
    }

    #region Vector tools
    public static Vector FromVector3(Vector3 vector) {
        return new Vector(vector.x, vector.y, vector.z);
    }
    public static Vector3 ToVector3(Vector vector) {
        return new Vector3(vector.x, vector.y, vector.z);
    }

    public static Vector Zero {
        get {
            return new Vector(0, 0, 0);
        }
    }

    /// &lt;summary&gt;
    /// This is used to get the position of a cell.
    /// &lt;/summary&gt;
    /// &lt;param name=&quot;x&quot;&gt;&lt;/param&gt;
    /// &lt;param name=&quot;y&quot;&gt;&lt;/param&gt;
    /// &lt;returns&gt;Cells position in the game.&lt;/returns&gt;
    public static Vector CoordsToPosition(IntCoords coords) {

        Vector vector = Zero;

        vector.x = 0.5f + coords.x;
        vector.z = 0.5f + coords.y;

        return vector;
    }

    public static IntCoords PositionToCoords(Vector3 vector) {
        return PositionToCoords(FromVector3(vector));
    }

    /// &lt;summary&gt;
    /// Returns the corresponding integer coordinates of a position vector.
    /// &lt;/summary&gt;
    /// &lt;param name=&quot;position&quot;&gt;&lt;/param&gt;
    /// &lt;returns&gt;Coordinates as IntCoords&lt;/returns&gt;
    public static IntCoords PositionToCoords(Vector position) {
        return new IntCoords((int)position.x, (int)position.z);
    }

    
    public static float Distance(Vector3 vector1, Vector3 vector2) {
        return Distance(FromVector3(vector1), FromVector3(vector2));
    }

    /// &lt;summary&gt;
    /// Returns the distance between to vectors.
    /// &lt;/summary&gt;
    /// &lt;param name=&quot;vector1&quot;&gt;&lt;/param&gt;
    /// &lt;param name=&quot;vector2&quot;&gt;&lt;/param&gt;
    /// &lt;returns&gt;&lt;/returns&gt;
    public static float Distance(Vector vector1, Vector vector2) {
        Vector distance = vector2 - vector1;
        return Maths.Abs(distance.Magnitude());
    }


    #endregion

    #region Math
    /// &lt;summary&gt;
    /// Vector dot product as float.
    /// &lt;/summary&gt;
    /// &lt;param name=&quot;a&quot;&gt;&lt;/param&gt;
    /// &lt;param name=&quot;b&quot;&gt;&lt;/param&gt;
    /// &lt;returns&gt;&lt;/returns&gt;
    public static float Dot(Vector a, Vector b) {

        double xA = a.x;
        double xB = b.x;
        double yA = a.y;
        double yB = b.y;
        double zA = a.z;
        double zB = b.z;

        return (float)(xA * xB + yA * yB + zA * zB);
    }

    /// &lt;summary&gt;
    /// Vector dot product as double.
    /// &lt;/summary&gt;
    /// &lt;param name=&quot;a&quot;&gt;&lt;/param&gt;
    /// &lt;param name=&quot;b&quot;&gt;&lt;/param&gt;
    /// &lt;returns&gt;&lt;/returns&gt;
    public static double DotAccurate(Vector a, Vector b) {

        double xA = a.x;
        double xB = b.x;
        double yA = a.y;
        double yB = b.y;
        double zA = a.z;
        double zB = b.z;

        return xA * xB + yA * yB + zA * zB;
    }

    // Replace this
    /// &lt;summary&gt;
    /// Reflects a vector off a normal.
    /// &lt;/summary&gt;
    /// &lt;param name=&quot;d&quot;&gt;&lt;/param&gt;
    /// &lt;param name=&quot;n&quot;&gt;&lt;/param&gt;
    /// &lt;returns&gt;&lt;/returns&gt;
    public static Vector Reflect(Vector d, Vector n) {

        return new Vector(Vector3.Reflect(d.Vector3, n.Vector3));

        double dot = DotAccurate(d, n);

        Vector v2dn = 2 * dot * n;

        return d - v2dn;
    }
    #endregion

    #region Operators
    public static Vector operator +(Vector a, Vector b) {
        return new Vector(a.x + b.x, a.y + b.y, a.z + b.z);
    }
    public static Vector operator -(Vector a, Vector b) {
        return new Vector(a.x - b.x, a.y - b.y, a.z - b.z);
    }

    public static Vector operator *(Vector a, Vector b) {
        return new Vector(a.x * b.x, a.y * b.y, a.z * b.z);
    }
    public static Vector operator /(Vector a, Vector b) {
        return new Vector(a.x / b.x, a.y / b.y, a.z / b.z);
    }

    public static Vector operator *(float f, Vector v) {
        return new Vector(v.x * f, v.y * f, v.z * f);
    }
    public static Vector operator *(double f, Vector v) {
        return new Vector(v.x * f, v.y * f, v.z * f);
    }
    public static Vector operator /(Vector a, float b) {
        return new Vector(a.x / b, a.y / b, a.z / b);
    }
    public static Vector operator /(Vector a, double b) {
        return new Vector(a.x / b, a.y / b, a.z / b);
    }

    public static bool operator ==(Vector a, Vector b) {
        return a.x == b.x &amp;&amp; a.y == b.y &amp;&amp; a.z == b.z;
    }
    public static bool operator !=(Vector a, Vector b) {
        return a.x != b.x || a.y != b.y || a.z != b.z;
    }
    #endregion

    public override string ToString() {
        return &quot;(&quot; + x + &quot;, &quot; + y + &quot;, &quot; + z + &quot;)&quot;;
    }
}
    </pre>
    <script type="text/javascript">
      highlightRanges([[15,36,15,37,0],[16,9,16,23,0],[17,9,17,23,0],[18,9,18,23,0],[19,5,19,6,0],[20,46,20,47,1],[21,9,21,20,1],[22,9,22,20,1],[23,9,23,20,1],[24,5,24,6,1],[25,49,25,50,1],[26,9,26,27,1],[27,9,27,27,1],[28,9,28,27,1],[29,5,29,6,1],[35,30,35,31,1],[36,9,36,81,1],[37,9,37,34,1],[38,5,38,6,1],[44,13,44,14,1],[45,13,45,44,1],[46,13,46,32,1],[46,33,46,34,0],[47,17,47,29,0],[49,13,49,37,1],[50,9,50,10,1],[57,13,57,14,0],[58,13,58,41,0],[59,9,59,10,0],[63,54,63,55,1],[64,9,64,57,1],[65,5,65,6,1],[66,52,66,53,1],[67,9,67,58,1],[68,5,68,6,1],[71,13,71,14,1],[72,13,72,40,1],[73,9,73,10,1],[82,61,82,62,1],[84,9,84,30,1],[86,9,86,36,1],[87,9,87,36,1],[89,9,89,23,1],[90,5,90,6,1],[92,62,92,63,0],[93,9,93,54,0],[94,5,94,6,0],[101,63,101,64,1],[102,9,102,64,1],[103,5,103,6,1],[106,68,106,69,0],[107,9,107,69,0],[108,5,108,6,0],[116,66,116,67,1],[117,9,117,45,1],[118,9,118,48,1],[119,5,119,6,1],[131,49,131,50,0],[133,9,133,25,0],[134,9,134,25,0],[135,9,135,25,0],[136,9,136,25,0],[137,9,137,25,0],[138,9,138,25,0],[140,9,140,53,0],[141,5,141,6,0],[149,58,149,59,0],[151,9,151,25,0],[152,9,152,25,0],[153,9,153,25,0],[154,9,154,25,0],[155,9,155,25,0],[156,9,156,25,0],[158,9,158,44,0],[159,5,159,6,0],[168,54,168,55,0],[170,9,170,66,0],[177,5,177,6,0],[181,57,181,58,1],[182,9,182,60,1],[183,5,183,6,1],[184,57,184,58,1],[185,9,185,60,1],[186,5,186,6,1],[188,57,188,58,1],[189,9,189,60,1],[190,5,190,6,1],[191,57,191,58,1],[192,9,192,60,1],[193,5,193,6,1],[195,56,195,57,1],[196,9,196,54,1],[197,5,197,6,1],[198,57,198,58,0],[199,9,199,54,0],[200,5,200,6,0],[201,56,201,57,1],[202,9,202,54,1],[203,5,203,6,1],[204,57,204,58,1],[205,9,205,54,1],[206,5,206,6,1],[208,56,208,57,1],[209,9,209,55,1],[210,5,210,6,1],[211,56,211,57,0],[212,9,212,55,0],[213,5,213,6,0],[216,39,216,40,1],[217,9,217,52,1],[218,5,218,6,1]]);
    </script>
  </body>
</html>