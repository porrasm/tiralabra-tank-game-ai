<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>p:\stuff\projects\minigamesproject\minigamesproject\assets\bearded man studios inc\editor\forgeclassrpcvalue.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
//#define FORGE_EDITOR_DEBUGGING

using BeardedManStudios.Forge.Networking.Generated;
using BeardedManStudios.Templating;
using SimpleJSONEditor;
using System;
using System.Collections.Generic;
using System.IO;
using System.Linq;
using System.Reflection;
using System.Text;
using UnityEditor;
using UnityEngine;

namespace BeardedManStudios.Forge.Networking.UnityEditor
{
	/// &lt;summary&gt;
	/// This is the rpc value of this class object
	/// &lt;/summary&gt;
	[Serializable]
	public class ForgeClassRPCValue
	{
		public string RPCName;
		public List&lt;ForgeAcceptableRPCTypes&gt; Arguments = new List&lt;ForgeAcceptableRPCTypes&gt;();
		public List&lt;string&gt; HelperTypes = new List&lt;string&gt;();

		public ForgeClassRPCValue(MethodInfo method, List&lt;ForgeAcceptableRPCTypes&gt; args = null, List&lt;string&gt; helperTypes = null)
		{
			RPCName = method.Name;
			ParameterInfo[] paramsInfo = method.GetParameters();
			if (args != null)
				Arguments = args;
			else
			{
				foreach (ParameterInfo info in paramsInfo)
					Arguments.Add(GetATypeFromPInfo(info));
			}

			if (helperTypes != null)
				HelperTypes = helperTypes;
			else
			{
				for (int i = 0; i &lt; Arguments.Count; ++i)
					HelperTypes.Add(string.Empty);
			}
		}

		public static ForgeAcceptableRPCTypes GetATypeFromPInfo(ParameterInfo pInfo)
		{
			ForgeAcceptableRPCTypes type = ForgeAcceptableRPCTypes.STRING;
			Type fieldType = pInfo.ParameterType;
			if (fieldType == typeof(int))
				type = ForgeAcceptableRPCTypes.INT;
			else if (fieldType == typeof(uint))
				type = ForgeAcceptableRPCTypes.UINT;
			else if (fieldType == typeof(bool))
				type = ForgeAcceptableRPCTypes.BOOL;
			else if (fieldType == typeof(byte))
				type = ForgeAcceptableRPCTypes.BYTE;
			else if (fieldType == typeof(char))
				type = ForgeAcceptableRPCTypes.CHAR;
			else if (fieldType == typeof(double))
				type = ForgeAcceptableRPCTypes.DOUBLE;
			else if (fieldType == typeof(float))
				type = ForgeAcceptableRPCTypes.FLOAT;
			else if (fieldType == typeof(long))
				type = ForgeAcceptableRPCTypes.LONG;
			else if (fieldType == typeof(ulong))
				type = ForgeAcceptableRPCTypes.ULONG;
			else if (fieldType == typeof(short))
				type = ForgeAcceptableRPCTypes.SHORT;
			else if (fieldType == typeof(ushort))
				type = ForgeAcceptableRPCTypes.USHORT;
			else if (fieldType == typeof(Color))
				type = ForgeAcceptableRPCTypes.COLOR;
			else if (fieldType == typeof(Quaternion))
				type = ForgeAcceptableRPCTypes.QUATERNION;
			else if (fieldType == typeof(Vector2))
				type = ForgeAcceptableRPCTypes.VECTOR2;
			else if (fieldType == typeof(Vector3))
				type = ForgeAcceptableRPCTypes.VECTOR3;
			else if (fieldType == typeof(Vector4))
				type = ForgeAcceptableRPCTypes.VECTOR4;
			else if (fieldType == typeof(string))
				type = ForgeAcceptableRPCTypes.STRING;
			//else if (fieldType == typeof(object[]))
			//	type = ForgeAcceptableRPCTypes.OBJECT_ARRAY;
			else if (fieldType == typeof(byte[]))
				type = ForgeAcceptableRPCTypes.BYTE_ARRAY;
			else
				type = ForgeAcceptableRPCTypes.Unknown;

			return type;
		}
	}
}
    </pre>
    <script type="text/javascript">
      highlightRanges([[24,3,24,88,0],[25,3,25,56,0],[27,3,27,123,0],[28,3,28,4,0],[29,4,29,26,0],[30,4,30,56,0],[31,4,31,21,0],[32,5,32,22,0],[34,4,34,5,0],[35,5,35,12,0],[35,14,35,32,0],[35,33,35,35,0],[35,36,35,46,0],[36,6,36,45,0],[37,4,37,5,0],[39,4,39,28,0],[40,5,40,31,0],[42,4,42,5,0],[43,10,43,19,0],[43,21,43,40,0],[43,42,43,45,0],[44,6,44,36,0],[45,4,45,5,0],[46,3,46,4,0],[49,3,49,4,0],[50,4,50,66,0],[51,4,51,41,0],[52,4,52,33,0],[53,5,53,40,0],[54,9,54,39,0],[55,5,55,41,0],[56,9,56,39,0],[57,5,57,41,0],[58,9,58,39,0],[59,5,59,41,0],[60,9,60,39,0],[61,5,61,41,0],[62,9,62,41,0],[63,5,63,43,0],[64,9,64,40,0],[65,5,65,42,0],[66,9,66,39,0],[67,5,67,41,0],[68,9,68,40,0],[69,5,69,42,0],[70,9,70,40,0],[71,5,71,42,0],[72,9,72,41,0],[73,5,73,43,0],[74,9,74,40,0],[75,5,75,42,0],[76,9,76,45,0],[77,5,77,47,0],[78,9,78,42,0],[79,5,79,44,0],[80,9,80,42,0],[81,5,81,44,0],[82,9,82,42,0],[83,5,83,44,0],[84,9,84,41,0],[85,5,85,43,0],[88,9,88,41,0],[89,5,89,47,0],[91,5,91,44,0],[93,4,93,16,0],[94,3,94,4,0]]);
    </script>
  </body>
</html>