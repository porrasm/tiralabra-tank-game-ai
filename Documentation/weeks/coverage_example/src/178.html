<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>p:\stuff\projects\minigamesproject\minigamesproject\assets\_assets\scripts\ui\tankaitestingui.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using BeardedManStudios.Forge.Networking.Unity;
using System.Collections;
using System.Collections.Generic;
using UnityEngine;
using UnityEngine.SceneManagement;
using UnityEngine.UI;

public class TankAITestingUI : MonoBehaviour {

    #region fields
    [SerializeField]
    private Text countText;

    [SerializeField]
    private Slider countSlider;

    [SerializeField]
    private Toggle onlyAIsToggle;

    [SerializeField]
    private Text infoText;

    private bool onlyAIs;
    #endregion

    private void Start() {

    }

    private void Update() {
        if (countText != null) {
            countText.text = &quot;AI Count &quot; + countSlider.value;
        }
    }

    public void CreateGame() {

        bool success = Server.StartServer();
        if (success) {
            print(&quot;Created server, loading scene.&quot;);
            SceneManager.LoadScene(&quot;TankAITestingLobby&quot;);
        } else {
            infoText.text = &quot;Unable to create server. The port 15937 needs to be available.&quot;;
        }
    }

    public void StartGame() {
        print(&quot;Starting game&quot;);

        int aiCount = (int)countSlider.value;

        if (aiCount &gt; 7 &amp;&amp; !onlyAIs) {
            aiCount = 7;
        } else if (aiCount &gt; 8) {
            aiCount = 8;
        }

        TankAIManager.AI_COUNT = aiCount;
        TankAIManager.PLAYER_ENABLED = !onlyAIs;

        IEnumerator StartCor() {

            // Instantiate local player
            if (!onlyAIs) {
                Player.CreateNewClient();
                yield return new WaitForSeconds(1);
            }

            TankAIManager.ClaimLocalPlayer();

            for (int i = 0; i &lt; aiCount; i++) {
                Player.CreateNewClient();
                yield return null;
            }

            yield return new WaitForSeconds(1);

            GameManager.StartGame();
        }


        StartCoroutine(StartCor());
    }
}

    </pre>
    <script type="text/javascript">
      highlightRanges([[26,26,26,27,0],[28,5,28,6,0],[30,27,30,28,0],[31,9,31,31,0],[31,32,31,33,0],[32,13,32,62,0],[33,9,33,10,0],[34,5,34,6,0],[36,30,36,31,0],[38,9,38,45,0],[39,9,39,21,0],[39,22,39,23,0],[40,13,40,53,0],[41,13,41,58,0],[42,9,42,10,0],[42,16,42,17,0],[43,13,43,94,0],[44,9,44,10,0],[45,5,45,6,0],[47,29,47,30,0],[48,9,48,32,0],[50,9,50,46,0],[52,9,52,37,0],[52,38,52,39,0],[53,13,53,25,0],[54,9,54,10,0],[54,16,54,32,0],[54,33,54,34,0],[55,13,55,25,0],[56,9,56,10,0],[58,9,58,42,0],[59,9,59,49,0],[61,32,61,33,0],[64,13,64,26,0],[64,27,64,28,0],[65,17,65,42,0],[66,17,66,52,0],[67,13,67,14,0],[69,13,69,46,0],[71,18,71,27,0],[71,29,71,40,0],[71,42,71,45,0],[71,47,71,48,0],[72,17,72,42,0],[73,17,73,35,0],[74,13,74,14,0],[76,13,76,48,0],[78,13,78,37,0],[79,9,79,10,0],[82,9,82,36,0],[83,5,83,6,0]]);
    </script>
  </body>
</html>