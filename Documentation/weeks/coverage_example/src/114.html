<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>p:\stuff\projects\minigamesproject\minigamesproject\assets\_assets\scripts\gamemanager.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using BeardedManStudios.Forge.Networking;
using BeardedManStudios.Forge.Networking.Generated;
using System.Collections;
using System.Collections.Generic;
using UnityEngine;
using UnityEngine.SceneManagement;

public class GameManager : GamesBehavior {

    private static Game currentGame;

    public enum Game { Menu = -2, Lobby = -1, TankGame = 1 }

    private void Start() {

        transform.SetParent(Scripts.GetGameObject().transform);

        currentGame = Game.Menu;
    }
    protected override void NetworkStart() {
        base.NetworkStart();
    }

    public static void InitGames() {

        string start = null;
        if (Server.Networker.IsServer) {
            start = &quot;Host_&quot;;
        } else {
            Player.CreateNewClient();
            start = &quot;Client_&quot;;
        }

        SceneManager.LoadScene(start + &quot;Lobby&quot;);
    }

    public static void StartGame(Game game) {
        GameManager g = Scripts.GetScriptComponent&lt;GameManager&gt;();

        if (g != null) {
            g.SetSceneComp(game);
        } else {
            print(&quot;GameManager was null&quot;);
        }
    }
    public static void StartGame() {
        StartGame(Game.TankGame);
    }

    private void SetSceneComp(Game game) {

        if (networkObject.IsServer) {
            networkObject.SendRpc(RPC_START_GAME_RPC, Receivers.All, (int)game);
        }
    }

    public void LoadGameScene() {

        string start = null;
        if (networkObject.IsServer) {
            start = &quot;Host_&quot;;
        } else {
            start = &quot;Client_&quot;;
        }

        if (currentGame == Game.Lobby) {

            SceneManager.LoadScene(start + &quot;Lobby&quot;);
        } else if (currentGame == Game.TankGame) {

            SceneManager.LoadScene(start + &quot;TankGame&quot;);
        }
    }


    #region RPCs
    public override void StartGameRpc(RpcArgs args) {

        int game = args.GetNext&lt;int&gt;();

        currentGame = (Game)game;
        LoadGameScene();
    }
    #endregion
}

    </pre>
    <script type="text/javascript">
      highlightRanges([[14,26,14,27,0],[16,9,16,64,0],[18,9,18,33,0],[19,5,19,6,0],[20,44,20,45,0],[21,9,21,29,0],[22,5,22,6,0],[24,36,24,37,0],[26,9,26,29,0],[27,9,27,39,0],[27,40,27,41,0],[28,13,28,29,0],[29,9,29,10,0],[29,16,29,17,0],[30,13,30,38,0],[31,13,31,31,0],[32,9,32,10,0],[34,9,34,49,0],[35,5,35,6,0],[37,45,37,46,0],[38,9,38,67,0],[40,9,40,23,0],[40,24,40,25,0],[41,13,41,34,0],[42,9,42,10,0],[42,16,42,17,0],[43,13,43,43,0],[44,9,44,10,0],[45,5,45,6,0],[46,36,46,37,0],[47,9,47,34,0],[48,5,48,6,0],[50,42,50,43,0],[52,9,52,36,0],[52,37,52,38,0],[53,13,53,81,0],[54,9,54,10,0],[55,5,55,6,0],[57,33,57,34,0],[59,9,59,29,0],[60,9,60,36,0],[60,37,60,38,0],[61,13,61,29,0],[62,9,62,10,0],[62,16,62,17,0],[63,13,63,31,0],[64,9,64,10,0],[66,9,66,39,0],[66,40,66,41,0],[68,13,68,53,0],[69,9,69,10,0],[69,16,69,49,0],[69,50,69,51,0],[71,13,71,56,0],[72,9,72,10,0],[73,5,73,6,0],[77,53,77,54,0],[79,9,79,40,0],[81,9,81,34,0],[82,9,82,25,0],[83,5,83,6,0]]);
    </script>
  </body>
</html>