<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>p:\stuff\projects\minigamesproject\minigamesproject\assets\bearded man studios inc\editor\forgeeditorrpcfield.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using System.Collections.Generic;
using UnityEngine;
using UnityEditor;
using System;

namespace BeardedManStudios.Forge.Networking.UnityEditor
{
	/// &lt;summary&gt;
	/// This is the rpc field for the network object
	/// &lt;/summary&gt;
	[Serializable]
	public class ForgeEditorRPCField
	{
		public string FieldName;
		public bool CanRender = true;
		public List&lt;ForgeNRPCTypes&gt; FieldTypes;
		public int ArgumentCount { get { return FieldTypes.Count; } }
		public bool Dropdown;

		public ForgeEditorRPCField()
		{
			FieldName = &quot;&quot;;
			FieldTypes = new List&lt;ForgeNRPCTypes&gt;();
		}

		public ForgeEditorRPCField Clone()
		{
			ForgeEditorRPCField returnValue = new ForgeEditorRPCField();

			returnValue.FieldName = this.FieldName;
			returnValue.FieldTypes.AddRange(this.FieldTypes);
			returnValue.Dropdown = this.Dropdown;
			returnValue.CanRender = this.CanRender;

			return returnValue;
		}

		public void Render()
		{
			if (!CanRender)
				return;

			GUILayout.BeginHorizontal();
			FieldName = GUILayout.TextField(FieldName);

			Dropdown = EditorGUILayout.Foldout(Dropdown, &quot;Arguments&quot;);

			if (Dropdown)
			{
				for (int i = 0; i &lt; FieldTypes.Count; ++i)
				{
					GUILayout.BeginHorizontal();
					FieldTypes[i].HelperName = EditorGUILayout.TextField(FieldTypes[i].HelperName);
					FieldTypes[i].Type = (ForgeAcceptableRPCTypes)EditorGUILayout.EnumPopup(FieldTypes[i].Type);
					//if (FieldTypes[i].Type == AcceptableTypes.Unknown) //Unsupported
					//{
					//	Debug.LogError(&quot;Can&#39;t set the type to unknown (Not Allowed)&quot;);
					//	FieldTypes[i].Type = AcceptableTypes.INT;
					//}

					Rect subtractBtn = EditorGUILayout.BeginVertical(&quot;Button&quot;, GUILayout.Width(75), GUILayout.Height(13));
					GUI.color = Color.red;
					if (GUI.Button(subtractBtn, GUIContent.none))
					{
						FieldTypes.RemoveAt(i);
						i--;
					}

					if (ForgeNetworkingEditor.ProVersion)
						GUI.color = Color.white;
					else
						GUI.color = Color.black;

					EditorGUILayout.BeginHorizontal();
					EditorGUILayout.Space();
					GUILayout.FlexibleSpace();
					GUILayout.Label(ForgeNetworkingEditor.SubtractIcon, GUILayout.Height(12));
					GUILayout.FlexibleSpace();
					EditorGUILayout.EndHorizontal();

					EditorGUILayout.EndVertical();
					GUI.color = Color.white;

					GUILayout.EndHorizontal();
				}

				Rect addBtn = EditorGUILayout.BeginVertical(&quot;Button&quot;, GUILayout.Width(75), GUILayout.Height(13));
				GUI.color = Color.green;
				if (GUI.Button(addBtn, GUIContent.none))
				{
					FieldTypes.Add(new ForgeNRPCTypes() { Type = ForgeAcceptableRPCTypes.BYTE });
				}
				if (ForgeNetworkingEditor.ProVersion)
					GUI.color = Color.white;
				else
					GUI.color = Color.black;
				EditorGUILayout.BeginHorizontal();
				EditorGUILayout.Space();
				GUILayout.FlexibleSpace();
				GUILayout.Label(ForgeNetworkingEditor.AddIcon, GUILayout.Height(12));
				GUILayout.FlexibleSpace();
				EditorGUILayout.EndHorizontal();
				EditorGUILayout.EndVertical();
				GUI.color = Color.white;
			}
		}

		public void Render(Rect rect, bool isActive, bool isFocused)
		{
			if (!CanRender)
				return;

			rect.y += 2;

			Rect changingRect = new Rect(rect.x, rect.y, rect.width * 0.3f, EditorGUIUtility.singleLineHeight);
			FieldName = EditorGUI.TextField(changingRect, FieldName);
			changingRect.x = rect.x + rect.width * 0.3f + 10;
			changingRect.width = rect.width * 0.2f - 10;
			Dropdown = EditorGUI.Foldout(changingRect, Dropdown, &quot;Arguments&quot;, true);

			if (Dropdown)
			{
				for (int i = 0; i &lt; FieldTypes.Count; ++i)
				{
					rect.height += EditorGUIUtility.singleLineHeight + 2;
					changingRect.y += EditorGUIUtility.singleLineHeight + 2;


					if (i &gt; 0)
					{
						changingRect.x = rect.width * 0.035f;
						changingRect.width = rect.width * 0.025f;
						if (GUI.Button(changingRect, &quot;^&quot;))
						{
							if (i - 1 &gt;= 0)
							{
								ForgeNRPCTypes t1 = FieldTypes[i - 1];
								ForgeNRPCTypes t2 = FieldTypes[i];
								FieldTypes[i - 1] = t2;
								FieldTypes[i] = t1;
							}
							else
							{
								ForgeNRPCTypes t1 = FieldTypes[FieldTypes.Count - 1];
								ForgeNRPCTypes t2 = FieldTypes[i];
								FieldTypes[FieldTypes.Count - 1] = t2;
								FieldTypes[i] = t1;
							}
						}
					}

					if (i &lt; FieldTypes.Count - 1)
					{
						changingRect.x = rect.width * 0.06f;
						changingRect.width = rect.width * 0.025f;
						if (GUI.Button(changingRect, &quot;v&quot;))
						{
							if (i + 1 &lt; FieldTypes.Count)
							{
								ForgeNRPCTypes t1 = FieldTypes[i + 1];
								ForgeNRPCTypes t2 = FieldTypes[i];
								FieldTypes[i + 1] = t2;
								FieldTypes[i] = t1;
							}
							else
							{
								ForgeNRPCTypes t1 = FieldTypes[0];
								ForgeNRPCTypes t2 = FieldTypes[i];
								FieldTypes[0] = t2;
								FieldTypes[i] = t1;
							}
						}
					}

					changingRect.x = rect.width * 0.1f;
					changingRect.width = rect.width * 0.3f;
					FieldTypes[i].HelperName = EditorGUI.TextField(changingRect, FieldTypes[i].HelperName);

					changingRect.x += rect.width * 0.3f + 10;
					FieldTypes[i].Type = (ForgeAcceptableRPCTypes)EditorGUI.EnumPopup(changingRect, FieldTypes[i].Type);

					changingRect.x += rect.width * 0.4f + 10;
					changingRect.width = rect.width * 0.2f;

					GUI.color = Color.red;
					if (GUI.Button(changingRect, GUIContent.none))
					{
						FieldTypes.RemoveAt(i);
						i--;
					}

					if (ForgeNetworkingEditor.ProVersion)
						GUI.color = Color.white;
					else
						GUI.color = Color.black;

					GUI.Label(changingRect, &quot;Remove&quot;, EditorStyles.boldLabel);
					//GUI.DrawTexture(changingRect, ForgeNetworkingEditor.SubtractIcon, ScaleMode.ScaleToFit);
					GUI.color = Color.white;
				}

				rect.height += EditorGUIUtility.singleLineHeight;
				changingRect.y += EditorGUIUtility.singleLineHeight;

				changingRect.x = rect.width * 0.1f;
				changingRect.width = rect.width * 0.3f;

				GUI.color = Color.green;
				if (GUI.Button(changingRect, GUIContent.none))
				{
					FieldTypes.Add(new ForgeNRPCTypes() { Type = ForgeAcceptableRPCTypes.BYTE });
				}
				if (ForgeNetworkingEditor.ProVersion)
					GUI.color = Color.white;
				else
					GUI.color = Color.black;

				GUI.Label(changingRect, &quot;Add&quot;, EditorStyles.boldLabel);
				//GUI.DrawTexture(changingRect, ForgeNetworkingEditor.AddIcon, ScaleMode.ScaleToFit);
				GUI.color = Color.white;
			}
		}

		public void AddRange(ForgeAcceptableRPCTypes[] types, string[] helperNames)
		{
			for (int i = 0; i &lt; types.Length; ++i)
			{
				FieldTypes.Add(new ForgeNRPCTypes() { Type = types[i], HelperName = helperNames[i] });
			}
		}
	}
}
    </pre>
    <script type="text/javascript">
      highlightRanges([[15,3,15,32,0],[17,34,17,35,0],[17,36,17,60,0],[17,61,17,62,0],[20,3,20,31,0],[21,3,21,4,0],[22,4,22,19,0],[23,4,23,44,0],[24,3,24,4,0],[27,3,27,4,0],[28,4,28,64,0],[30,4,30,43,0],[31,4,31,53,0],[32,4,32,41,0],[33,4,33,43,0],[35,4,35,23,0],[36,3,36,4,0],[39,3,39,4,0],[40,4,40,19,0],[41,5,41,12,0],[43,4,43,32,0],[44,4,44,47,0],[46,4,46,62,0],[48,4,48,17,0],[49,4,49,5,0],[50,10,50,19,0],[50,21,50,41,0],[50,43,50,46,0],[51,5,51,6,0],[52,6,52,34,0],[53,6,53,85,0],[54,6,54,98,0],[61,6,61,108,0],[62,6,62,28,0],[63,6,63,51,0],[64,6,64,7,0],[65,7,65,30,0],[66,7,66,11,0],[67,6,67,7,0],[69,6,69,43,0],[70,7,70,31,0],[72,7,72,31,0],[74,6,74,40,0],[75,6,75,30,0],[76,6,76,32,0],[77,6,77,80,0],[78,6,78,32,0],[79,6,79,38,0],[81,6,81,36,0],[82,6,82,30,0],[84,6,84,32,0],[85,5,85,6,0],[87,5,87,102,0],[88,5,88,29,0],[89,5,89,45,0],[90,5,90,6,0],[91,6,91,83,0],[92,5,92,6,0],[93,5,93,42,0],[94,6,94,30,0],[96,6,96,30,0],[97,5,97,39,0],[98,5,98,29,0],[99,5,99,31,0],[100,5,100,74,0],[101,5,101,31,0],[102,5,102,37,0],[103,5,103,35,0],[104,5,104,29,0],[105,4,105,5,0],[106,3,106,4,0],[109,3,109,4,0],[110,4,110,19,0],[111,5,111,12,0],[113,4,113,16,0],[115,4,115,103,0],[116,4,116,61,0],[117,4,117,53,0],[118,4,118,48,0],[119,4,119,76,0],[121,4,121,17,0],[122,4,122,5,0],[123,10,123,19,0],[123,21,123,41,0],[123,43,123,46,0],[124,5,124,6,0],[125,6,125,59,0],[126,6,126,62,0],[129,6,129,16,0],[130,6,130,7,0],[131,7,131,44,0],[132,7,132,48,0],[133,7,133,41,0],[134,7,134,8,0],[135,8,135,23,0],[136,8,136,9,0],[137,9,137,47,0],[138,9,138,43,0],[139,9,139,32,0],[140,9,140,28,0],[141,8,141,9,0],[143,8,143,9,0],[144,9,144,62,0],[145,9,145,43,0],[146,9,146,47,0],[147,9,147,28,0],[148,8,148,9,0],[149,7,149,8,0],[150,6,150,7,0],[152,6,152,35,0],[153,6,153,7,0],[154,7,154,43,0],[155,7,155,48,0],[156,7,156,41,0],[157,7,157,8,0],[158,8,158,37,0],[159,8,159,9,0],[160,9,160,47,0],[161,9,161,43,0],[162,9,162,32,0],[163,9,163,28,0],[164,8,164,9,0],[166,8,166,9,0],[167,9,167,43,0],[168,9,168,43,0],[169,9,169,28,0],[170,9,170,28,0],[171,8,171,9,0],[172,7,172,8,0],[173,6,173,7,0],[175,6,175,41,0],[176,6,176,45,0],[177,6,177,93,0],[179,6,179,47,0],[180,6,180,106,0],[182,6,182,47,0],[183,6,183,45,0],[185,6,185,28,0],[186,6,186,52,0],[187,6,187,7,0],[188,7,188,30,0],[189,7,189,11,0],[190,6,190,7,0],[192,6,192,43,0],[193,7,193,31,0],[195,7,195,31,0],[197,6,197,64,0],[199,6,199,30,0],[200,5,200,6,0],[202,5,202,54,0],[203,5,203,57,0],[205,5,205,40,0],[206,5,206,44,0],[208,5,208,29,0],[209,5,209,51,0],[210,5,210,6,0],[211,6,211,83,0],[212,5,212,6,0],[213,5,213,42,0],[214,6,214,30,0],[216,6,216,30,0],[218,5,218,60,0],[220,5,220,29,0],[221,4,221,5,0],[222,3,222,4,0],[225,3,225,4,0],[226,9,226,18,0],[226,20,226,36,0],[226,38,226,41,0],[227,4,227,5,0],[228,5,228,91,0],[229,4,229,5,0],[230,3,230,4,0]]);
    </script>
  </body>
</html>