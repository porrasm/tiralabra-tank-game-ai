<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>p:\stuff\projects\minigamesproject\minigamesproject\assets\_assets\scripts\ui\playerlist.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using System.Collections;
using System.Collections.Generic;
using UnityEngine;
using UnityEngine.UI;


public class PlayerList : MonoBehaviour {

    #region fields
    private ClientManager manager;
    private GameObject listObject; 

    private PlayerObjectPair[] playerObjects;
    private GameObject playerListObject;

    private GameObject table;

    private struct PlayerObjectPair {
        public Player Player;
        public GameObject Object;
    }

    [SerializeField]
    private bool game;

    private float time;
    #endregion

    private void Start() {
        manager = Scripts.GetScriptComponent&lt;ClientManager&gt;();
        playerObjects = new PlayerObjectPair[8];

        for (int i = 0; i &lt; 8; i++) {
            transform.GetChild(i).gameObject.SetActive(false);
        }
    }

    private void Update() {
        CheckUpdate();
    }

    public void CheckUpdate() {

        if (!game) {
            Player[] players = manager.GetPlayers();

            if (Input.GetKeyDown(KeyCode.Space)) {
                UpdateList(players);
                return;
            }

            if (NeedToUpdate(players)) {
                UpdateList(players);
            }
        } else {

            time -= Time.deltaTime;

            if (time &lt; 0) {
                time = 1;
                UpdateList(manager.GetPlayers());
            }
        }
    }

    private void UpdateList(Player[] players) {

        for (int i = 0; i &lt; 8; i++) {
            transform.GetChild(i).GetComponent&lt;PlayerListObject&gt;().SetInfo(players[i]);
        }
    }

    private bool NeedToUpdate(Player[] players) {

        for (int i = 0; i &lt; 8; i++) {
            
            if (!transform.GetChild(i).GetComponent&lt;PlayerListObject&gt;().Matches(players[i])) {
                return true;
            }
        }

        return false;
    }
    private bool PlayerMatch(Player p, int index) {

        Transform listPlayer = transform.GetChild(index);

        return true;
    }

    public void AddPlayer(Player player) {

        PlayerObjectPair playerObject = new PlayerObjectPair();
        playerObject.Player = player;

        GameObject newListObject = Instantiate(playerListObject);
        RectTransform rect = newListObject.GetComponent&lt;RectTransform&gt;();
        rect.SetParent(GetComponent&lt;RectTransform&gt;());

        Vector3 listPos = new Vector3(0, player.ID * rect.sizeDelta.y, 0);

        newListObject.GetComponent&lt;RectTransform&gt;().localPosition = listPos;

        playerObject.Object = newListObject;

        RemovePlayer(player);
        playerObjects[player.ID] = playerObject;
    }
    public void RemovePlayer(Player player) {

        if (playerObjects[player.ID].Player == null) {
            return;
        }

        Destroy(playerObjects[player.ID].Object);

        playerObjects[player.ID] = new PlayerObjectPair();
    }
}

    </pre>
    <script type="text/javascript">
      highlightRanges([[29,26,29,27,0],[30,9,30,63,0],[31,9,31,49,0],[33,14,33,23,0],[33,25,33,30,0],[33,32,33,35,0],[33,37,33,38,0],[34,13,34,63,0],[35,9,35,10,0],[36,5,36,6,0],[38,27,38,28,0],[39,9,39,23,0],[40,5,40,6,0],[42,31,42,32,0],[44,9,44,19,0],[44,20,44,21,0],[45,13,45,53,0],[47,13,47,49,0],[47,50,47,51,0],[48,17,48,37,0],[49,17,49,24,0],[52,13,52,39,0],[52,40,52,41,0],[53,17,53,37,0],[54,13,54,14,0],[55,9,55,10,0],[55,16,55,17,0],[57,13,57,36,0],[59,13,59,26,0],[59,27,59,28,0],[60,17,60,26,0],[61,17,61,50,0],[62,13,62,14,0],[63,9,63,10,0],[64,5,64,6,0],[66,47,66,48,0],[68,14,68,23,0],[68,25,68,30,0],[68,32,68,35,0],[68,37,68,38,0],[69,13,69,88,0],[70,9,70,10,0],[71,5,71,6,0],[73,49,73,50,0],[75,14,75,23,0],[75,25,75,30,0],[75,32,75,35,0],[75,37,75,38,0],[77,13,77,93,0],[77,94,77,95,0],[78,17,78,29,0],[80,9,80,10,0],[82,9,82,22,0],[83,5,83,6,0],[84,51,84,52,0],[86,9,86,58,0],[88,9,88,21,0],[89,5,89,6,0],[91,42,91,43,0],[93,9,93,64,0],[94,9,94,38,0],[96,9,96,66,0],[97,9,97,74,0],[98,9,98,55,0],[100,9,100,75,0],[102,9,102,77,0],[104,9,104,45,0],[106,9,106,30,0],[107,9,107,49,0],[108,5,108,6,0],[109,45,109,46,0],[111,9,111,53,0],[111,54,111,55,0],[112,13,112,20,0],[115,9,115,50,0],[117,9,117,59,0],[118,5,118,6,0]]);
    </script>
  </body>
</html>